pipeline {
    agent any
    
    stages {
        stage('Checkout') {
            steps {
                // Checkout your source code from version control
                // Original: git 'https://github.com/khadarvallik98-cloud/Maven.git'
                
                // CORRECTED: Explicitly specify the branch
                git branch: 'main', url: 'https://github.com/khadarvallik98-cloud/Maven.git'
            }
        }
        stage('Build') {
            steps {
                // Use Maven to build your project
                sh 'mvn clean package'
            }
        }
        stage('Test') {
            steps {
                // Run tests if applicable
                sh 'mvn test'
            }
        }
        stage('Deploy') {
            steps {
                // Deploy your artifact, if necessary
                echo 'Skipping deployment for this run.'
                // Example: sh 'mvn deploy'
            }
        }
    }

    // The 'post' block MUST be inside the 'pipeline' block, but outside the 'stages' block.
    post {
        success {
            // This block will be executed if the pipeline runs successfully
            echo 'Pipeline executed successfully! ðŸŽ‰'
        }
        failure {
            // This block will be executed if the pipeline fails
            echo 'Pipeline failed! ðŸ›‘ Check the logs above for the error.'
        }
        // You can add 'always' for cleanup tasks regardless of the result
        always {
            echo 'Pipeline run finished.'
        }
    }
}
